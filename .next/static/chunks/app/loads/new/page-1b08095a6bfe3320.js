(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{47852:function(e,r,t){Promise.resolve().then(t.bind(t,9487))},79580:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(57977).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},70094:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(57977).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},50489:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(57977).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9487:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return v}});var n=t(3827),s=t(64090),i=t(90074),l=t(47907),a=t(21270),o=t(82670),d=t(30248),c=t(575),u=t(80244),x=t(22782),m=t(56288),p=t(70094),h=t(50489),g=t(79580),f=t(96441);d.Ry({id:d.Z_().optional(),location:d.Z_().min(2,"Location is required"),gallons:d.Z_().transform(e=>parseFloat(e)),pricePerGallon:d.Z_().transform(e=>parseFloat(e)),date:d.Z_().min(1,"Date is required"),notes:d.Z_().optional()});let b=d.Ry({name:d.Z_().min(1,{message:"Name is required"}),pickupCity:d.Z_().min(1,{message:"Pickup location is required"}),dropoffCity:d.Z_().min(1,{message:"Delivery location is required"}),status:d.Km(["pending","in-progress","completed","cancelled"]),paymentStatus:d.Km(["pending","paid","due","overdue"]),paymentAmount:d.Rx().min(0,{message:"Payment amount must be positive"}),dispatcherPercentage:d.Rx().min(0,{message:"Dispatcher percentage must be positive"}),miles:d.Rx().min(0,{message:"Miles must be positive"}),truckId:d.Z_().min(1,{message:"Please select a truck"}),currentTruckMileage:d.Rx().min(0,{message:"Current mileage must be positive"}),fuelStops:d.IX(d.Ry({location:d.Z_(),gallons:d.Rx(),pricePerGallon:d.Rx(),totalCost:d.Rx(),date:d.Z_(),notes:d.Z_().optional()})).optional(),notes:d.Z_().optional()});function v(){let e=(0,l.useRouter)(),[r,t]=(0,s.useState)(!1),[d,v]=(0,s.useState)(null),[j,y]=(0,s.useState)(null),[N,k]=(0,s.useState)(""),w=(0,o.cI)({resolver:(0,a.F)(b),defaultValues:{name:"",pickupCity:"",dropoffCity:"",dispatcherPercentage:0,paymentAmount:0,miles:0,status:"pending",paymentStatus:"pending",truckId:"",currentTruckMileage:void 0,fuelStops:[],notes:""}}),{fields:I,append:S,remove:C}=(0,o.Dq)({control:w.control,name:"fuelStops"}),z=async r=>{try{let t=r.fuelStops||[];t.reduce((e,r)=>e+r.gallons*r.pricePerGallon,0),t.reduce((e,r)=>e+r.gallons,0),new Date().toISOString(),new Date().toISOString(),await new Promise(e=>setTimeout(e,1e3)),m.Am.success("Load has been created successfully"),e.push("/loads")}catch(e){console.error("Error creating load:",e),m.Am.error("Failed to create load")}},G=e=>{let r=f.NS.find(r=>r.id===e);r&&(w.setValue("truckId",e),w.setValue("currentTruckMileage",r.mileage))};return(0,n.jsxs)("div",{className:"max-w-2xl mx-auto pt-6",children:[(0,n.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"New Load"}),(0,n.jsx)("p",{className:"text-gray-400 mt-1",children:"Add a new load to your schedule"})]}),(0,n.jsx)(u.l0,{...w,children:(0,n.jsxs)("form",{onSubmit:w.handleSubmit(z),className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,n.jsx)(u.Wi,{control:w.control,name:"name",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Load Name"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{placeholder:"LA to NYC Route",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"pickupCity",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Pickup City"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{placeholder:"Los Angeles, CA",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"dropoffCity",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Dropoff City"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{placeholder:"New York, NY",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"dispatcherPercentage",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Dispatcher %"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{type:"number",step:"0.01",placeholder:"10",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"paymentAmount",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Payment Amount"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{type:"number",step:"0.01",placeholder:"4500",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"miles",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Miles"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{type:"number",placeholder:"2789",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"status",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Status"}),(0,n.jsx)(u.NI,{children:(0,n.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...r,children:[(0,n.jsx)("option",{value:"pending",children:"Pending"}),(0,n.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,n.jsx)("option",{value:"completed",children:"Completed"}),(0,n.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"paymentStatus",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Payment Status"}),(0,n.jsx)(u.NI,{children:(0,n.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...r,children:[(0,n.jsx)("option",{value:"due",children:"Due"}),(0,n.jsx)("option",{value:"paid",children:"Paid"})]})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"truckId",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Select Truck"}),(0,n.jsx)(u.NI,{children:(0,n.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...r,onChange:e=>{r.onChange(e),G(e.target.value)},children:[(0,n.jsx)("option",{value:"",children:"Select a truck"}),f.NS.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.name," - Current Mileage: ",e.mileage]},e.id))]})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"currentTruckMileage",render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Current Truck Mileage"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{type:"number",placeholder:"Enter current mileage",...r,value:r.value||"",onChange:e=>r.onChange(e.target.value?parseFloat(e.target.value):void 0),disabled:!w.watch("truckId")})}),(0,n.jsx)(u.zG,{})]})}})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"Fuel Stops"}),(0,n.jsxs)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{S({location:"",gallons:0,pricePerGallon:0,totalCost:0,date:new Date().toISOString().split("T")[0],notes:""})},className:"bg-[#18181b]/30 border-gray-800/50 hover:bg-[#18181b]/50 hover:border-gray-700/50",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Add Fuel Stop"]})]}),0===I.length&&(0,n.jsx)("div",{className:"text-center py-6 text-gray-400",children:'No fuel stops added yet. Click "Add Fuel Stop" to add one.'}),I.map((e,r)=>(0,n.jsxs)("div",{className:"border rounded-md p-4 space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("h4",{className:"font-medium",children:["Fuel Stop #",r+1]}),(0,n.jsx)(c.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(r),className:"text-destructive hover:text-destructive",children:(0,n.jsx)(h.Z,{className:"h-4 w-4"})})]}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,n.jsx)(u.Wi,{control:w.control,name:"fuelStops.".concat(r,".location"),render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Location"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{placeholder:"Gas Station Name",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"fuelStops.".concat(r,".date"),render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Date"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{type:"date",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"fuelStops.".concat(r,".gallons"),render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Gallons"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{type:"number",step:"0.01",placeholder:"100",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"fuelStops.".concat(r,".pricePerGallon"),render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Price per Gallon"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{type:"number",step:"0.01",placeholder:"3.40",...r})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:w.control,name:"fuelStops.".concat(r,".notes"),render:e=>{let{field:r}=e;return(0,n.jsxs)(u.xJ,{className:"md:col-span-2",children:[(0,n.jsx)(u.lX,{children:"Notes (Optional)"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{placeholder:"Any additional notes",...r})}),(0,n.jsx)(u.zG,{})]})}})]})]},e.id))]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(u.lX,{children:"Fuel Receipt"}),(0,n.jsx)(x.I,{type:"file",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){let e=new FileReader;e.onloadend=()=>{v(e.result)},e.readAsDataURL(t)}},className:"bg-[#18181b]/30 border-gray-800/50 hover:bg-[#18181b]/50 hover:border-gray-700/50"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(u.lX,{children:"Load Paperwork"}),(0,n.jsx)(x.I,{type:"file",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){let e=new FileReader;e.onloadend=()=>{y(e.result)},e.readAsDataURL(t)}},className:"bg-[#18181b]/30 border-gray-800/50 hover:bg-[#18181b]/50 hover:border-gray-700/50"})]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 mt-8",children:[(0,n.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>e.back(),className:"bg-[#18181b]/30 border-gray-800/50 hover:bg-[#18181b]/50 hover:border-gray-700/50",children:"Cancel"}),(0,n.jsx)(c.z,{type:"submit",disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white border border-orange-500",children:r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Load"})]})]})})]})}},575:function(e,r,t){"use strict";t.d(r,{z:function(){return o}});var n=t(3827);t(64090);var s=t(59143),i=t(49769),l=t(22169);let a=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive touch-manipulation",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90 active:bg-primary/80",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 active:bg-destructive/80 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground active:bg-accent/80 dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80 active:bg-secondary/70",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/80 dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2 has-[>svg]:px-3 min-h-[44px]",sm:"h-9 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 min-h-[36px]",lg:"h-12 rounded-md px-6 has-[>svg]:px-4 min-h-[48px]",icon:"size-10 min-h-[44px] min-w-[44px]"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:r,variant:t,size:i,asChild:o=!1,...d}=e,c=o?s.g7:"button";return(0,n.jsx)(c,{"data-slot":"button",className:(0,l.cn)(a({variant:t,size:i,className:r})),...d})}},80244:function(e,r,t){"use strict";t.d(r,{NI:function(){return g},Wi:function(){return u},l0:function(){return d},lX:function(){return h},xJ:function(){return p},zG:function(){return f}});var n=t(3827),s=t(64090),i=t(59143),l=t(82670),a=t(22169),o=t(12647);let d=l.RV,c=s.createContext({}),u=e=>{let{...r}=e;return(0,n.jsx)(c.Provider,{value:{name:r.name},children:(0,n.jsx)(l.Qr,{...r})})},x=()=>{let e=s.useContext(c),r=s.useContext(m),{getFieldState:t}=(0,l.Gc)(),n=(0,l.cl)({name:e.name}),i=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=r;return{id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message"),...i}},m=s.createContext({});function p(e){let{className:r,...t}=e,i=s.useId();return(0,n.jsx)(m.Provider,{value:{id:i},children:(0,n.jsx)("div",{"data-slot":"form-item",className:(0,a.cn)("grid gap-2",r),...t})})}function h(e){let{className:r,...t}=e,{error:s,formItemId:i}=x();return(0,n.jsx)(o._,{"data-slot":"form-label","data-error":!!s,className:(0,a.cn)("data-[error=true]:text-destructive",r),htmlFor:i,...t})}function g(e){let{...r}=e,{error:t,formItemId:s,formDescriptionId:l,formMessageId:a}=x();return(0,n.jsx)(i.g7,{"data-slot":"form-control",id:s,"aria-describedby":t?"".concat(l," ").concat(a):"".concat(l),"aria-invalid":!!t,...r})}function f(e){var r;let{className:t,...s}=e,{error:i,formMessageId:l}=x(),o=i?String(null!==(r=null==i?void 0:i.message)&&void 0!==r?r:""):s.children;return o?(0,n.jsx)("p",{"data-slot":"form-message",id:l,className:(0,a.cn)("text-destructive text-sm",t),...s,children:o}):null}},22782:function(e,r,t){"use strict";t.d(r,{I:function(){return l}});var n=t(3827),s=t(64090),i=t(22169);let l=s.forwardRef((e,r)=>{let{className:t,type:s,...l}=e;return(0,n.jsx)("input",{type:s,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),ref:r,...l})});l.displayName="Input"},12647:function(e,r,t){"use strict";t.d(r,{_:function(){return l}});var n=t(3827);t(64090);var s=t(24602),i=t(22169);function l(e){let{className:r,...t}=e;return(0,n.jsx)(s.f,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}},29586:function(e,r,t){"use strict";t.d(r,{WV:function(){return a},jH:function(){return o}});var n=t(64090),s=t(89542),i=t(59143),l=t(3827),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let t=n.forwardRef((e,t)=>{let{asChild:n,...s}=e,a=n?i.g7:r;return window[Symbol.for("radix-ui")]=!0,(0,l.jsx)(a,{...s,ref:t})});return t.displayName="Primitive.".concat(r),{...e,[r]:t}},{});function o(e,r){e&&s.flushSync(()=>e.dispatchEvent(r))}}},function(e){e.O(0,[150,74,884,288,18,989,971,69,744],function(){return e(e.s=47852)}),_N_E=e.O()}]);