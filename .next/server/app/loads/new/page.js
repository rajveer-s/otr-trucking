(()=>{var e={};e.id=732,e.ids=[732],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7403:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(50482),n=t(69108),l=t(62563),i=t.n(l),a=t(68300),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);t.d(r,o);let d=["",{children:["loads",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,13477)),"/Users/rajveer/Development/otr-trucking-app/src/app/loads/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,16442)),"/Users/rajveer/Development/otr-trucking-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/rajveer/Development/otr-trucking-app/src/app/loads/new/page.tsx"],u="/loads/new/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/loads/new/page",pathname:"/loads/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27554:(e,r,t)=>{Promise.resolve().then(t.bind(t,2563))},56389:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(97075).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},51838:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(97075).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},38271:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(97075).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2563:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var s=t(95344),n=t(3729),l=t(22984),i=t(8428),a=t(85453),o=t(60708),d=t(29709),c=t(5094),u=t(2249),x=t(46540),p=t(34755),m=t(51838),h=t(38271),g=t(56389),j=t(70263);d.Ry({id:d.Z_().optional(),location:d.Z_().min(2,"Location is required"),gallons:d.Z_().transform(e=>parseFloat(e)),pricePerGallon:d.Z_().transform(e=>parseFloat(e)),date:d.Z_().min(1,"Date is required"),notes:d.Z_().optional()});let f=d.Ry({name:d.Z_().min(1,{message:"Name is required"}),pickupCity:d.Z_().min(1,{message:"Pickup location is required"}),dropoffCity:d.Z_().min(1,{message:"Delivery location is required"}),status:d.Km(["pending","in-progress","completed","cancelled"]),paymentStatus:d.Km(["pending","paid","due","overdue"]),paymentAmount:d.Rx().min(0,{message:"Payment amount must be positive"}),dispatcherPercentage:d.Rx().min(0,{message:"Dispatcher percentage must be positive"}),miles:d.Rx().min(0,{message:"Miles must be positive"}),truckId:d.Z_().min(1,{message:"Please select a truck"}),currentTruckMileage:d.Rx().min(0,{message:"Current mileage must be positive"}),fuelStops:d.IX(d.Ry({location:d.Z_(),gallons:d.Rx(),pricePerGallon:d.Rx(),totalCost:d.Rx(),date:d.Z_(),notes:d.Z_().optional()})).optional(),notes:d.Z_().optional()});function b(){let e=(0,i.useRouter)(),[r,t]=(0,n.useState)(!1),[d,b]=(0,n.useState)(null),[v,y]=(0,n.useState)(null),[N,k]=(0,n.useState)(""),I=(0,o.cI)({resolver:(0,a.F)(f),defaultValues:{name:"",pickupCity:"",dropoffCity:"",dispatcherPercentage:0,paymentAmount:0,miles:0,status:"pending",paymentStatus:"pending",truckId:"",currentTruckMileage:void 0,fuelStops:[],notes:""}}),{fields:w,append:P,remove:S}=(0,o.Dq)({control:I.control,name:"fuelStops"}),C=async r=>{try{let t=r.fuelStops||[];t.reduce((e,r)=>e+r.gallons*r.pricePerGallon,0),t.reduce((e,r)=>e+r.gallons,0),new Date().toISOString(),new Date().toISOString(),await new Promise(e=>setTimeout(e,1e3)),p.Am.success("Load has been created successfully"),e.push("/loads")}catch(e){console.error("Error creating load:",e),p.Am.error("Failed to create load")}},_=e=>{let r=j.NS.find(r=>r.id===e);r&&(I.setValue("truckId",e),I.setValue("currentTruckMileage",r.mileage))};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto pt-6",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"New Load"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Add a new load to your schedule"})]}),s.jsx(u.l0,{...I,children:(0,s.jsxs)("form",{onSubmit:I.handleSubmit(C),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(u.Wi,{control:I.control,name:"name",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Load Name"}),s.jsx(u.NI,{children:s.jsx(x.I,{placeholder:"LA to NYC Route",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:"pickupCity",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Pickup City"}),s.jsx(u.NI,{children:s.jsx(x.I,{placeholder:"Los Angeles, CA",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:"dropoffCity",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Dropoff City"}),s.jsx(u.NI,{children:s.jsx(x.I,{placeholder:"New York, NY",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:"dispatcherPercentage",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Dispatcher %"}),s.jsx(u.NI,{children:s.jsx(x.I,{type:"number",step:"0.01",placeholder:"10",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:"paymentAmount",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Payment Amount"}),s.jsx(u.NI,{children:s.jsx(x.I,{type:"number",step:"0.01",placeholder:"4500",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:"miles",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Miles"}),s.jsx(u.NI,{children:s.jsx(x.I,{type:"number",placeholder:"2789",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:"status",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Status"}),s.jsx(u.NI,{children:(0,s.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...e,children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:"paymentStatus",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Payment Status"}),s.jsx(u.NI,{children:(0,s.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...e,children:[s.jsx("option",{value:"due",children:"Due"}),s.jsx("option",{value:"paid",children:"Paid"})]})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:"truckId",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Select Truck"}),s.jsx(u.NI,{children:(0,s.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...e,onChange:r=>{e.onChange(r),_(r.target.value)},children:[s.jsx("option",{value:"",children:"Select a truck"}),j.NS.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," - Current Mileage: ",e.mileage]},e.id))]})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:"currentTruckMileage",render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Current Truck Mileage"}),s.jsx(u.NI,{children:s.jsx(x.I,{type:"number",placeholder:"Enter current mileage",...e,value:e.value||"",onChange:r=>e.onChange(r.target.value?parseFloat(r.target.value):void 0),disabled:!I.watch("truckId")})}),s.jsx(u.zG,{})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Fuel Stops"}),(0,s.jsxs)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{P({location:"",gallons:0,pricePerGallon:0,totalCost:0,date:new Date().toISOString().split("T")[0],notes:""})},className:"bg-[#18181b]/30 border-gray-800/50 hover:bg-[#18181b]/50 hover:border-gray-700/50",children:[s.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Add Fuel Stop"]})]}),0===w.length&&s.jsx("div",{className:"text-center py-6 text-gray-400",children:'No fuel stops added yet. Click "Add Fuel Stop" to add one.'}),w.map((e,r)=>(0,s.jsxs)("div",{className:"border rounded-md p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h4",{className:"font-medium",children:["Fuel Stop #",r+1]}),s.jsx(c.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(r),className:"text-destructive hover:text-destructive",children:s.jsx(h.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(u.Wi,{control:I.control,name:`fuelStops.${r}.location`,render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Location"}),s.jsx(u.NI,{children:s.jsx(x.I,{placeholder:"Gas Station Name",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:`fuelStops.${r}.date`,render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Date"}),s.jsx(u.NI,{children:s.jsx(x.I,{type:"date",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:`fuelStops.${r}.gallons`,render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Gallons"}),s.jsx(u.NI,{children:s.jsx(x.I,{type:"number",step:"0.01",placeholder:"100",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:`fuelStops.${r}.pricePerGallon`,render:({field:e})=>(0,s.jsxs)(u.xJ,{children:[s.jsx(u.lX,{children:"Price per Gallon"}),s.jsx(u.NI,{children:s.jsx(x.I,{type:"number",step:"0.01",placeholder:"3.40",...e})}),s.jsx(u.zG,{})]})}),s.jsx(u.Wi,{control:I.control,name:`fuelStops.${r}.notes`,render:({field:e})=>(0,s.jsxs)(u.xJ,{className:"md:col-span-2",children:[s.jsx(u.lX,{children:"Notes (Optional)"}),s.jsx(u.NI,{children:s.jsx(x.I,{placeholder:"Any additional notes",...e})}),s.jsx(u.zG,{})]})})]})]},e.id))]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx(u.lX,{children:"Fuel Receipt"}),s.jsx(x.I,{type:"file",onChange:e=>{let r=e.target.files?.[0];if(r){let e=new FileReader;e.onloadend=()=>{b(e.result)},e.readAsDataURL(r)}},className:"bg-[#18181b]/30 border-gray-800/50 hover:bg-[#18181b]/50 hover:border-gray-700/50"})]}),(0,s.jsxs)("div",{children:[s.jsx(u.lX,{children:"Load Paperwork"}),s.jsx(x.I,{type:"file",onChange:e=>{let r=e.target.files?.[0];if(r){let e=new FileReader;e.onloadend=()=>{y(e.result)},e.readAsDataURL(r)}},className:"bg-[#18181b]/30 border-gray-800/50 hover:bg-[#18181b]/50 hover:border-gray-700/50"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-8",children:[s.jsx(c.z,{type:"button",variant:"outline",onClick:()=>e.back(),className:"bg-[#18181b]/30 border-gray-800/50 hover:bg-[#18181b]/50 hover:border-gray-700/50",children:"Cancel"}),s.jsx(c.z,{type:"submit",disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white border border-orange-500",children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Load"})]})]})})]})}},2249:(e,r,t)=>{"use strict";t.d(r,{NI:()=>g,Wi:()=>u,l0:()=>d,lX:()=>h,xJ:()=>m,zG:()=>j});var s=t(95344),n=t(3729),l=t(32751),i=t(60708),a=t(11453),o=t(7361);let d=i.RV,c=n.createContext({}),u=({...e})=>s.jsx(c.Provider,{value:{name:e.name},children:s.jsx(i.Qr,{...e})}),x=()=>{let e=n.useContext(c),r=n.useContext(p),{getFieldState:t}=(0,i.Gc)(),s=(0,i.cl)({name:e.name}),l=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=r;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...l}},p=n.createContext({});function m({className:e,...r}){let t=n.useId();return s.jsx(p.Provider,{value:{id:t},children:s.jsx("div",{"data-slot":"form-item",className:(0,a.cn)("grid gap-2",e),...r})})}function h({className:e,...r}){let{error:t,formItemId:n}=x();return s.jsx(o._,{"data-slot":"form-label","data-error":!!t,className:(0,a.cn)("data-[error=true]:text-destructive",e),htmlFor:n,...r})}function g({...e}){let{error:r,formItemId:t,formDescriptionId:n,formMessageId:i}=x();return s.jsx(l.g7,{"data-slot":"form-control",id:t,"aria-describedby":r?`${n} ${i}`:`${n}`,"aria-invalid":!!r,...e})}function j({className:e,...r}){let{error:t,formMessageId:n}=x(),l=t?String(t?.message??""):r.children;return l?s.jsx("p",{"data-slot":"form-message",id:n,className:(0,a.cn)("text-destructive text-sm",e),...r,children:l}):null}},46540:(e,r,t)=>{"use strict";t.d(r,{I:()=>i});var s=t(95344),n=t(3729),l=t(11453);let i=n.forwardRef(({className:e,type:r,...t},n)=>s.jsx("input",{type:r,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),ref:n,...t}));i.displayName="Input"},7361:(e,r,t)=>{"use strict";t.d(r,{_:()=>i});var s=t(95344);t(3729);var n=t(14217),l=t(11453);function i({className:e,...r}){return s.jsx(n.f,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}},13477:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});let s=(0,t(86843).createProxy)(String.raw`/Users/rajveer/Development/otr-trucking-app/src/app/loads/new/page.tsx`),{__esModule:n,$$typeof:l}=s,i=s.default},62409:(e,r,t)=>{"use strict";t.d(r,{WV:()=>a,jH:()=>o});var s=t(3729),n=t(81202),l=t(32751),i=t(95344),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let t=s.forwardRef((e,t)=>{let{asChild:s,...n}=e,a=s?l.g7:r;return(0,i.jsx)(a,{...n,ref:t})});return t.displayName=`Primitive.${r}`,{...e,[r]:t}},{});function o(e,r){e&&n.flushSync(()=>e.dispatchEvent(r))}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[681,984,708,617,25],()=>t(7403));module.exports=s})();